---
title: webの知識のまとめ-関数
author: 星川漣
createDate: 2023-11-29
tags: 関数,アロー関数,ジェネレーター関数,残余引数,デフォルト引数
abstract: アロー関数、ジェネレーター関数、残余引数、デフォルト引数を紹介します。
---

## 1. アロー関数

使い方

```js
let f = (v) => v;

let fn = (a, b) => {
	return a + b;
};
```

-   アロー関数と普通の関数の違い

    1. アロー関数自身には this がない、アロー関数の中の this 値はスコープチェーンの一番上の this 値と同じ、call,apply,bind などを使っても this 値を変えられない。
    2. アロー関数には prototype 属性と [[Construct]] メソッドがない、だからコンストラクターとして使えない、new 演算子も使えない。
    3. アロー関数の中には arguments がない、arguments が必要なら、残余引数を使えばいい。
    4. アロー関数全部匿名関数で、変数に代入して使わなければ、普通の関数は function キーワードで直接関数を宣言できる。
    5. アロー関数は function\* 宣言になれない、yield キーワードを使えない。

## 2. ジェネレーター関数

[ジェネレーター関数](https://xtt.moe/ja/article/19)　を見てください。

## 3. 残余引数

残余引数は可変長の引数を配列として受け入れることができる。

```js
function sum(...args) {
	return args.reduce((prev, cur) => prev + cur);
}
sum(1, 2, 3, 4, 5); // 15
```

> 残余引数は最後の引数でなければならない、そうでなければエラーになる

> 残余引数は関数の length に影響を与える、length は関数の引数の数を返す、残余引数は length に含まれない

-   残余引数と arguments 　の違い方

    1. 残余引数は本当の Array インスタンス、arguments は擬似配列。
    2. arguments にはいくつかの追加のプロパティがある (例えば callee は現在実行中の関数を指す)。
    3. 残余引数は対応する引数がない引数だけを含む、arguments は全ての引数を含む。

## 4. デフォルト引数

es6 では関数の引数にデフォルト値を設定できる、つまり引数の後ろに直接書けばいい。

```js
function fn(a = 1, b = 2) {
	return a + b;
}
fn(); // 3
```

関数のデフォルト引数には関数の length に影響を与える、length は関数の引数の数を返す、デフォルト引数は length に含まれない。例えば　`(function fn(a, b = 2){}).length` は 1 になる。また、デフォルト引数の後ろにある引数も length に含まれないため、`(function fn(a, b = 2, c){}).length`の返り値も 1 になる。

---

> 以下は個人的な意見で

デフォルト引数は関数の length に影響を与えるため（カリー化など）、私的にはよく使わない、デフォルト引数を使う代わりに `a = a || 1` という形式でデフォルト値を設定する。もし引数が多い場合、オブジェクトを使って引数を受け取り、関数内で分割代入を使ってデフォルト値を設定する。例えば：

```js
function fn(options) {
	let { a = 1, b = 2, c = 3 } = options || {};
	return a + b + c;
}
fn(); // 8
```
